EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 2
Title "Circuitos de controle e comunicação"
Date "2020-11-18"
Rev "v0.1"
Comp ""
Comment1 "Pedro Henrique Kopper"
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L power:+3V3 #PWR0101
U 1 1 5FB23B78
P 6350 850
F 0 "#PWR0101" H 6350 700 50  0001 C CNN
F 1 "+3V3" H 6365 1023 50  0000 C CNN
F 2 "" H 6350 850 50  0001 C CNN
F 3 "" H 6350 850 50  0001 C CNN
	1    6350 850 
	1    0    0    -1  
$EndComp
Wire Wire Line
	6600 1050 6600 850 
Wire Wire Line
	6500 1050 6500 950 
Wire Wire Line
	6500 950  6400 950 
Wire Wire Line
	6350 950  6350 850 
Wire Wire Line
	6400 1050 6400 950 
Connection ~ 6400 950 
Wire Wire Line
	6400 950  6350 950 
Wire Wire Line
	6300 1050 6300 950 
Wire Wire Line
	6300 950  6350 950 
Connection ~ 6350 950 
Wire Wire Line
	6200 1050 6200 950 
Wire Wire Line
	6200 950  6300 950 
Connection ~ 6300 950 
$Comp
L power:GND #PWR0102
U 1 1 5FB25391
P 6350 4750
F 0 "#PWR0102" H 6350 4500 50  0001 C CNN
F 1 "GND" H 6355 4577 50  0000 C CNN
F 2 "" H 6350 4750 50  0001 C CNN
F 3 "" H 6350 4750 50  0001 C CNN
	1    6350 4750
	1    0    0    -1  
$EndComp
Wire Wire Line
	6350 4750 6350 4700
Wire Wire Line
	6350 4700 6300 4700
Wire Wire Line
	6200 4700 6200 4650
Wire Wire Line
	6300 4700 6300 4650
Connection ~ 6300 4700
Wire Wire Line
	6300 4700 6200 4700
Wire Wire Line
	6400 4700 6400 4650
Wire Wire Line
	6400 4700 6350 4700
Connection ~ 6350 4700
Wire Wire Line
	6500 4650 6500 4700
Wire Wire Line
	6500 4700 6400 4700
Connection ~ 6400 4700
Text GLabel 5650 5200 2    50   Input ~ 0
CAN_H
Text GLabel 5650 5400 2    50   Input ~ 0
CAN_L
$Comp
L power:+3.3V #PWR0103
U 1 1 5FB45AF4
P 4750 4950
F 0 "#PWR0103" H 4750 4800 50  0001 C CNN
F 1 "+3.3V" H 4765 5123 50  0000 C CNN
F 2 "" H 4750 4950 50  0001 C CNN
F 3 "" H 4750 4950 50  0001 C CNN
	1    4750 4950
	-1   0    0    -1  
$EndComp
$Comp
L power:GND #PWR0104
U 1 1 5FB462B2
P 4750 5750
F 0 "#PWR0104" H 4750 5500 50  0001 C CNN
F 1 "GND" H 4755 5577 50  0000 C CNN
F 2 "" H 4750 5750 50  0001 C CNN
F 3 "" H 4750 5750 50  0001 C CNN
	1    4750 5750
	-1   0    0    -1  
$EndComp
$Comp
L Device:R_Small R4
U 1 1 5FB4B1A9
P 5350 5300
F 0 "R4" H 5000 5300 50  0000 L CNN
F 1 "120" H 5150 5300 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric" H 5350 5300 50  0001 C CNN
F 3 "~" H 5350 5300 50  0001 C CNN
F 4 "C17437" H 5350 5300 50  0001 C CNN "LCSC"
	1    5350 5300
	-1   0    0    -1  
$EndComp
Text Notes 5800 5550 2    39   ~ 0
Optional termination
Wire Wire Line
	5200 5200 5200 5250
Wire Wire Line
	5200 5250 5150 5250
Wire Wire Line
	5350 5200 5200 5200
Wire Wire Line
	5150 5350 5200 5350
Wire Wire Line
	5200 5350 5200 5400
Wire Wire Line
	5350 5400 5200 5400
Wire Wire Line
	5650 5400 5350 5400
Connection ~ 5350 5400
Wire Wire Line
	5650 5200 5350 5200
Connection ~ 5350 5200
$Comp
L power:+3.3VADC #PWR0105
U 1 1 5FBBA6D6
P 6650 850
F 0 "#PWR0105" H 6800 800 50  0001 C CNN
F 1 "+3.3VADC" H 6665 1023 50  0000 C CNN
F 2 "" H 6650 850 50  0001 C CNN
F 3 "" H 6650 850 50  0001 C CNN
	1    6650 850 
	1    0    0    -1  
$EndComp
Wire Wire Line
	6650 850  6600 850 
$Sheet
S 900  1050 1650 1100
U 5FBC07FC
F0 "Power Supply and Decoupling" 39
F1 "PwrSD.sch" 39
$EndSheet
Wire Wire Line
	5250 2500 5250 2450
Wire Wire Line
	5250 2350 5250 2300
$Comp
L Device:C_Small C2
U 1 1 5FC0728D
P 5000 2300
F 0 "C2" V 4771 2300 50  0000 C CNN
F 1 "12pF" V 4862 2300 50  0000 C CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 5000 2300 50  0001 C CNN
F 3 "~" H 5000 2300 50  0001 C CNN
F 4 "C38523" H 5000 2300 50  0001 C CNN "LCSC"
	1    5000 2300
	0    1    1    0   
$EndComp
$Comp
L Device:C_Small C3
U 1 1 5FC07A43
P 5000 2500
F 0 "C3" V 4900 2500 50  0000 C CNN
F 1 "12pF" V 4800 2500 50  0000 C CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 5000 2500 50  0001 C CNN
F 3 "~" H 5000 2500 50  0001 C CNN
F 4 "C38523" H 5000 2500 50  0001 C CNN "LCSC"
	1    5000 2500
	0    -1   -1   0   
$EndComp
$Comp
L power:GND #PWR0106
U 1 1 5FC09B6D
P 4850 2400
F 0 "#PWR0106" H 4850 2150 50  0001 C CNN
F 1 "GND" V 4855 2272 50  0000 R CNN
F 2 "" H 4850 2400 50  0001 C CNN
F 3 "" H 4850 2400 50  0001 C CNN
	1    4850 2400
	0    1    1    0   
$EndComp
Wire Wire Line
	4900 2300 4850 2300
Wire Wire Line
	4850 2300 4850 2400
Wire Wire Line
	4900 2500 4850 2500
Wire Wire Line
	4850 2500 4850 2400
Connection ~ 4850 2400
Wire Wire Line
	5250 2450 5600 2450
Wire Wire Line
	5250 2350 5600 2350
$Comp
L Connector_Generic:Conn_02x04_Top_Bottom J2
U 1 1 5FB4D4E1
P 1700 2700
F 0 "J2" H 1750 3017 50  0000 C CNN
F 1 "CAN BUS" H 1750 2926 50  0000 C CNN
F 2 "Connector_Molex:Molex_Mini-Fit_Jr_5566-08A_2x04_P4.20mm_Vertical" H 1700 2700 50  0001 C CNN
F 3 "~" H 1700 2700 50  0001 C CNN
	1    1700 2700
	1    0    0    -1  
$EndComp
Text GLabel 1500 2900 0    50   Input ~ 0
CAN_H
Text GLabel 1500 2800 0    50   Input ~ 0
CAN_L
$Comp
L power:GND #PWR0107
U 1 1 5FB51F99
P 2000 2900
F 0 "#PWR0107" H 2000 2650 50  0001 C CNN
F 1 "GND" H 2005 2727 50  0000 C CNN
F 2 "" H 2000 2900 50  0001 C CNN
F 3 "" H 2000 2900 50  0001 C CNN
	1    2000 2900
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR0108
U 1 1 5FB524E0
P 2000 2600
F 0 "#PWR0108" H 2000 2350 50  0001 C CNN
F 1 "GND" V 2005 2472 50  0000 R CNN
F 2 "" H 2000 2600 50  0001 C CNN
F 3 "" H 2000 2600 50  0001 C CNN
	1    2000 2600
	0    -1   -1   0   
$EndComp
$Comp
L power:+12V #PWR0109
U 1 1 5FB52C63
P 2000 2700
F 0 "#PWR0109" H 2000 2550 50  0001 C CNN
F 1 "+12V" V 2015 2828 50  0000 L CNN
F 2 "" H 2000 2700 50  0001 C CNN
F 3 "" H 2000 2700 50  0001 C CNN
	1    2000 2700
	0    1    1    0   
$EndComp
$Comp
L power:+12V #PWR0110
U 1 1 5FB530A2
P 1500 2600
F 0 "#PWR0110" H 1500 2450 50  0001 C CNN
F 1 "+12V" V 1515 2728 50  0000 L CNN
F 2 "" H 1500 2600 50  0001 C CNN
F 3 "" H 1500 2600 50  0001 C CNN
	1    1500 2600
	0    -1   -1   0   
$EndComp
$Comp
L power:GND #PWR0111
U 1 1 5FB53E62
P 1500 2700
F 0 "#PWR0111" H 1500 2450 50  0001 C CNN
F 1 "GND" V 1505 2572 50  0000 R CNN
F 2 "" H 1500 2700 50  0001 C CNN
F 3 "" H 1500 2700 50  0001 C CNN
	1    1500 2700
	0    1    1    0   
$EndComp
Text GLabel 2050 2850 2    50   Input ~ 0
~ERROR
Wire Wire Line
	2050 2850 2050 2800
Wire Wire Line
	2050 2800 2000 2800
$Comp
L Interface_CAN_LIN:SN65HVD230 U2
U 1 1 5FB562E9
P 4750 5250
F 0 "U2" H 4800 4800 50  0000 C CNN
F 1 "SN65HVD230" H 5000 4900 50  0000 C CNN
F 2 "Package_SO:SOIC-8_3.9x4.9mm_P1.27mm" H 4750 4750 50  0001 C CNN
F 3 "http://www.ti.com/lit/ds/symlink/sn65hvd230.pdf" H 4650 5650 50  0001 C CNN
F 4 "C12084" H 4750 5250 50  0001 C CNN "LCSC"
	1    4750 5250
	1    0    0    -1  
$EndComp
Wire Wire Line
	4750 5650 4750 5750
$Comp
L Device:R_Small R3
U 1 1 5FB59EF4
P 4250 5600
F 0 "R3" H 4309 5646 50  0000 L CNN
F 1 "0" H 4309 5555 50  0000 L CNN
F 2 "Resistor_SMD:R_0603_1608Metric" H 4250 5600 50  0001 C CNN
F 3 "~" H 4250 5600 50  0001 C CNN
F 4 "C21189" H 4250 5600 50  0001 C CNN "LCSC"
	1    4250 5600
	1    0    0    -1  
$EndComp
Wire Wire Line
	4350 5450 4250 5450
Wire Wire Line
	4250 5450 4250 5500
Wire Wire Line
	4250 5700 4250 5750
Wire Wire Line
	4250 5750 4750 5750
Connection ~ 4750 5750
Text Notes 4150 5900 0    39   ~ 0
We don't care \nabout EMI for now
$Comp
L power:GND #PWR0112
U 1 1 5FB76FE3
P 2000 4700
F 0 "#PWR0112" H 2000 4450 50  0001 C CNN
F 1 "GND" V 2005 4572 50  0000 R CNN
F 2 "" H 2000 4700 50  0001 C CNN
F 3 "" H 2000 4700 50  0001 C CNN
	1    2000 4700
	0    -1   -1   0   
$EndComp
$Comp
L power:GND #PWR0113
U 1 1 5FB7764C
P 1500 4700
F 0 "#PWR0113" H 1500 4450 50  0001 C CNN
F 1 "GND" V 1505 4572 50  0000 R CNN
F 2 "" H 1500 4700 50  0001 C CNN
F 3 "" H 1500 4700 50  0001 C CNN
	1    1500 4700
	0    1    1    0   
$EndComp
$Comp
L power:GND #PWR0114
U 1 1 5FB77C25
P 1500 3500
F 0 "#PWR0114" H 1500 3250 50  0001 C CNN
F 1 "GND" V 1505 3372 50  0000 R CNN
F 2 "" H 1500 3500 50  0001 C CNN
F 3 "" H 1500 3500 50  0001 C CNN
	1    1500 3500
	0    1    1    0   
$EndComp
$Comp
L power:GND #PWR0115
U 1 1 5FB77F89
P 2000 3500
F 0 "#PWR0115" H 2000 3250 50  0001 C CNN
F 1 "GND" V 2005 3372 50  0000 R CNN
F 2 "" H 2000 3500 50  0001 C CNN
F 3 "" H 2000 3500 50  0001 C CNN
	1    2000 3500
	0    -1   -1   0   
$EndComp
Text GLabel 2000 4300 2    30   Input ~ 0
~ERROR
$Comp
L power:+12V #PWR0116
U 1 1 5FB7908F
P 1500 3600
F 0 "#PWR0116" H 1500 3450 50  0001 C CNN
F 1 "+12V" V 1515 3728 50  0000 L CNN
F 2 "" H 1500 3600 50  0001 C CNN
F 3 "" H 1500 3600 50  0001 C CNN
	1    1500 3600
	0    -1   -1   0   
$EndComp
$Comp
L power:+12V #PWR0117
U 1 1 5FB795A7
P 1500 4600
F 0 "#PWR0117" H 1500 4450 50  0001 C CNN
F 1 "+12V" V 1515 4728 50  0000 L CNN
F 2 "" H 1500 4600 50  0001 C CNN
F 3 "" H 1500 4600 50  0001 C CNN
	1    1500 4600
	0    -1   -1   0   
$EndComp
$Comp
L power:+12V #PWR0118
U 1 1 5FB79AC1
P 2000 4600
F 0 "#PWR0118" H 2000 4450 50  0001 C CNN
F 1 "+12V" V 2015 4728 50  0000 L CNN
F 2 "" H 2000 4600 50  0001 C CNN
F 3 "" H 2000 4600 50  0001 C CNN
	1    2000 4600
	0    1    1    0   
$EndComp
$Comp
L power:+12V #PWR0119
U 1 1 5FB7A290
P 2000 3600
F 0 "#PWR0119" H 2000 3450 50  0001 C CNN
F 1 "+12V" V 2015 3728 50  0000 L CNN
F 2 "" H 2000 3600 50  0001 C CNN
F 3 "" H 2000 3600 50  0001 C CNN
	1    2000 3600
	0    1    1    0   
$EndComp
Text GLabel 2000 3700 2    50   Input ~ 0
U_H
Text GLabel 2000 3800 2    50   Input ~ 0
V_H
Text GLabel 2000 3900 2    50   Input ~ 0
W_H
Text GLabel 2000 4000 2    50   Input ~ 0
U_L
Text GLabel 2000 4100 2    50   Input ~ 0
V_L
Text GLabel 2000 4200 2    50   Input ~ 0
W_L
Text GLabel 2000 4400 2    50   Input ~ 0
ENABLE
Text GLabel 2000 4500 2    50   Input ~ 0
VBUS_SCALED
Text GLabel 1500 4100 0    50   Input ~ 0
CURR_W
Text GLabel 1500 4000 0    50   Input ~ 0
CURR_V
Text GLabel 1500 3900 0    50   Input ~ 0
CURR_U
$Comp
L Device:R_Small R2
U 1 1 5FB95222
P 5550 1100
F 0 "R2" H 5491 1054 50  0000 R CNN
F 1 "4k7" H 5491 1145 50  0000 R CNN
F 2 "Resistor_SMD:R_0603_1608Metric" H 5550 1100 50  0001 C CNN
F 3 "~" H 5550 1100 50  0001 C CNN
F 4 "C23162" H 5550 1100 50  0001 C CNN "LCSC"
	1    5550 1100
	1    0    0    1   
$EndComp
$Comp
L Device:R_Small R1
U 1 1 5FB977A0
P 5300 1100
F 0 "R1" H 5241 1054 50  0000 R CNN
F 1 "4k7" H 5241 1145 50  0000 R CNN
F 2 "Resistor_SMD:R_0603_1608Metric" H 5300 1100 50  0001 C CNN
F 3 "~" H 5300 1100 50  0001 C CNN
F 4 "C23162" H 5300 1100 50  0001 C CNN "LCSC"
	1    5300 1100
	1    0    0    1   
$EndComp
Wire Wire Line
	5600 1450 5300 1450
Wire Wire Line
	5300 1450 5300 1200
Wire Wire Line
	5600 1250 5550 1250
Wire Wire Line
	5550 1250 5550 1200
Wire Wire Line
	5550 1000 5550 950 
Wire Wire Line
	5550 950  5450 950 
Wire Wire Line
	5300 950  5300 1000
$Comp
L power:+3V3 #PWR0120
U 1 1 5FB9A9B8
P 5450 850
F 0 "#PWR0120" H 5450 700 50  0001 C CNN
F 1 "+3V3" H 5465 1023 50  0000 C CNN
F 2 "" H 5450 850 50  0001 C CNN
F 3 "" H 5450 850 50  0001 C CNN
	1    5450 850 
	1    0    0    -1  
$EndComp
Wire Wire Line
	5450 850  5450 950 
Connection ~ 5450 950 
Wire Wire Line
	5450 950  5300 950 
Text GLabel 5550 1250 0    39   Input ~ 0
~RESET
Text GLabel 7000 2550 2    50   Input ~ 0
SWDIO
Text GLabel 7000 2650 2    50   Input ~ 0
SWCLK
Text GLabel 7000 3250 2    50   Input ~ 0
SWO
Text GLabel 4350 5150 0    50   Input ~ 0
CAN_TX
Text GLabel 4350 5250 0    50   Input ~ 0
CAN_RX
Text GLabel 7000 3750 2    50   Input ~ 0
CAN_RX
Text GLabel 7000 3850 2    50   Input ~ 0
CAN_TX
Text GLabel 7000 2450 2    50   Input ~ 0
USB_D+
Text GLabel 7000 2350 2    50   Input ~ 0
USB_D-
$Comp
L Device:R_Small R7
U 1 1 5FBA1869
P 7500 2750
F 0 "R7" V 7304 2750 50  0000 C CNN
F 1 "1k5" V 7395 2750 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric" H 7500 2750 50  0001 C CNN
F 3 "~" H 7500 2750 50  0001 C CNN
F 4 "C22843" H 7500 2750 50  0001 C CNN "LCSC"
	1    7500 2750
	0    1    1    0   
$EndComp
Text GLabel 7600 2750 2    50   Input ~ 0
USB_D+
Text Notes 8350 2650 2    39   ~ 0
Pull-up resistor for\nfull-speed identification
$Comp
L Connector:USB_B_Mini J1
U 1 1 5FBAAB5E
P 900 6800
F 0 "J1" H 957 7267 50  0000 C CNN
F 1 "USB_B_Mini" H 957 7176 50  0000 C CNN
F 2 "Connector_USB:USB_Micro-B_Molex-105133-0001" H 1050 6750 50  0001 C CNN
F 3 "~" H 1050 6750 50  0001 C CNN
	1    900  6800
	1    0    0    -1  
$EndComp
$Comp
L Connector_Generic:Conn_02x05_Odd_Even J4
U 1 1 5FBAC1B9
P 1700 5400
F 0 "J4" H 1750 5817 50  0000 C CNN
F 1 "Mini-Debugging" H 1750 5726 50  0000 C CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_2x05_P2.54mm_Vertical" H 1700 5400 50  0001 C CNN
F 3 "~" H 1700 5400 50  0001 C CNN
	1    1700 5400
	1    0    0    -1  
$EndComp
$Comp
L power:+5V #PWR0121
U 1 1 5FBAD5E7
P 1750 6000
F 0 "#PWR0121" H 1750 5850 50  0001 C CNN
F 1 "+5V" H 1765 6173 50  0000 C CNN
F 2 "" H 1750 6000 50  0001 C CNN
F 3 "" H 1750 6000 50  0001 C CNN
	1    1750 6000
	-1   0    0    1   
$EndComp
$Comp
L power:+3.3V #PWR0122
U 1 1 5FBAE49C
P 1500 5500
F 0 "#PWR0122" H 1500 5350 50  0001 C CNN
F 1 "+3.3V" V 1515 5628 50  0000 L CNN
F 2 "" H 1500 5500 50  0001 C CNN
F 3 "" H 1500 5500 50  0001 C CNN
	1    1500 5500
	0    -1   -1   0   
$EndComp
$Comp
L power:+3.3V #PWR0123
U 1 1 5FBAE9DE
P 2000 5500
F 0 "#PWR0123" H 2000 5350 50  0001 C CNN
F 1 "+3.3V" V 2015 5628 50  0000 L CNN
F 2 "" H 2000 5500 50  0001 C CNN
F 3 "" H 2000 5500 50  0001 C CNN
	1    2000 5500
	0    1    1    0   
$EndComp
$Comp
L power:GND #PWR0124
U 1 1 5FBAF0FD
P 2000 5400
F 0 "#PWR0124" H 2000 5150 50  0001 C CNN
F 1 "GND" V 2005 5272 50  0000 R CNN
F 2 "" H 2000 5400 50  0001 C CNN
F 3 "" H 2000 5400 50  0001 C CNN
	1    2000 5400
	0    -1   -1   0   
$EndComp
$Comp
L power:GND #PWR0125
U 1 1 5FBAF872
P 1500 5400
F 0 "#PWR0125" H 1500 5150 50  0001 C CNN
F 1 "GND" V 1505 5272 50  0000 R CNN
F 2 "" H 1500 5400 50  0001 C CNN
F 3 "" H 1500 5400 50  0001 C CNN
	1    1500 5400
	0    1    1    0   
$EndComp
Text GLabel 2000 5300 2    50   Input ~ 0
SWDIO
Text GLabel 2000 5200 2    50   Input ~ 0
SWCLK
Text GLabel 1500 5300 0    50   Input ~ 0
SWO
Text GLabel 1500 5200 0    39   Input ~ 0
~RESET
Text GLabel 7000 4250 2    50   Input ~ 0
U_L
Text GLabel 7000 4350 2    50   Input ~ 0
V_L
Text GLabel 7000 4450 2    50   Input ~ 0
W_L
Text GLabel 7000 2250 2    50   Input ~ 0
W_H
Text GLabel 7000 2150 2    50   Input ~ 0
V_H
Text GLabel 7000 2050 2    50   Input ~ 0
U_H
$Comp
L Memory_Flash:W25Q128JVS U3
U 1 1 5FBB7F0C
P 4750 6950
F 0 "U3" H 4850 6500 50  0000 C CNN
F 1 "W25Q128JVS" H 5050 6600 50  0000 C CNN
F 2 "Package_SO:SOIC-8_5.23x5.23mm_P1.27mm" H 4750 6950 50  0001 C CNN
F 3 "http://www.winbond.com/resource-files/w25q128jv_dtr%20revc%2003272018%20plus.pdf" H 4750 6950 50  0001 C CNN
F 4 "C97521" H 4750 6950 50  0001 C CNN "LCSC"
	1    4750 6950
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR0126
U 1 1 5FBBE179
P 4750 6550
F 0 "#PWR0126" H 4750 6400 50  0001 C CNN
F 1 "+3.3V" H 4765 6723 50  0000 C CNN
F 2 "" H 4750 6550 50  0001 C CNN
F 3 "" H 4750 6550 50  0001 C CNN
	1    4750 6550
	-1   0    0    -1  
$EndComp
$Comp
L power:GND #PWR0127
U 1 1 5FBBEE85
P 4750 7350
F 0 "#PWR0127" H 4750 7100 50  0001 C CNN
F 1 "GND" H 4755 7177 50  0000 C CNN
F 2 "" H 4750 7350 50  0001 C CNN
F 3 "" H 4750 7350 50  0001 C CNN
	1    4750 7350
	-1   0    0    -1  
$EndComp
Text GLabel 4250 6850 0    50   Input ~ 0
~FLASH_CS
Text GLabel 4250 7050 0    50   Input ~ 0
FLASH_CLK
Text GLabel 5250 6750 2    50   Input ~ 0
FLASH_MOSI
Text GLabel 5250 6850 2    50   Input ~ 0
FLASH_MISO
$Comp
L power:GND #PWR0128
U 1 1 5FBCB1AB
P 850 7250
F 0 "#PWR0128" H 850 7000 50  0001 C CNN
F 1 "GND" H 855 7077 50  0000 C CNN
F 2 "" H 850 7250 50  0001 C CNN
F 3 "" H 850 7250 50  0001 C CNN
	1    850  7250
	1    0    0    -1  
$EndComp
Wire Wire Line
	850  7250 850  7200
Wire Wire Line
	850  7200 800  7200
Wire Wire Line
	850  7200 900  7200
Connection ~ 850  7200
Text GLabel 1500 4400 0    50   Input ~ 0
HALL1
Text GLabel 1500 4300 0    50   Input ~ 0
HALL2
Text GLabel 1500 4200 0    50   Input ~ 0
HALL3
NoConn ~ 1500 3700
Text Notes 1450 3750 2    50   ~ 10
RESERVED
$Comp
L Power_Protection:SRV05-4 U1
U 1 1 5FBE26B1
P 2650 6900
F 0 "U1" H 2800 6350 50  0000 C CNN
F 1 "SRV05-4" H 2900 6450 50  0000 C CNN
F 2 "Package_TO_SOT_SMD:SOT-23-6" H 3350 6450 50  0001 C CNN
F 3 "http://www.onsemi.com/pub/Collateral/SRV05-4-D.PDF" H 2650 6900 50  0001 C CNN
F 4 "C85364" H 2650 6900 50  0001 C CNN "LCSC"
	1    2650 6900
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR0129
U 1 1 5FBE6394
P 2650 7400
F 0 "#PWR0129" H 2650 7150 50  0001 C CNN
F 1 "GND" H 2655 7227 50  0000 C CNN
F 2 "" H 2650 7400 50  0001 C CNN
F 3 "" H 2650 7400 50  0001 C CNN
	1    2650 7400
	1    0    0    -1  
$EndComp
$Comp
L power:+5V #PWR0130
U 1 1 5FBE6619
P 3050 6350
F 0 "#PWR0130" H 3050 6200 50  0001 C CNN
F 1 "+5V" H 3065 6523 50  0000 C CNN
F 2 "" H 3050 6350 50  0001 C CNN
F 3 "" H 3050 6350 50  0001 C CNN
	1    3050 6350
	1    0    0    -1  
$EndComp
Text GLabel 1200 6900 2    50   Input ~ 0
USB_D-
Text GLabel 1200 6800 2    50   Input ~ 0
USB_D+
Text GLabel 2150 6800 0    50   Input ~ 0
USB_D+
Text GLabel 2150 7000 0    50   Input ~ 0
USB_D-
Wire Wire Line
	2650 6400 1800 6400
Wire Wire Line
	1800 6400 1800 6600
$Comp
L Diode:1N5819 D2
U 1 1 5FC0DE31
P 2850 6400
F 0 "D2" H 2850 6183 50  0000 C CNN
F 1 "1N5819" H 2850 6274 50  0000 C CNN
F 2 "Diode_SMD:D_SOD-123" H 2850 6225 50  0001 C CNN
F 3 "http://www.vishay.com/docs/88525/1n5817.pdf" H 2850 6400 50  0001 C CNN
F 4 "C8598" H 2850 6400 50  0001 C CNN "LCSC"
	1    2850 6400
	-1   0    0    1   
$EndComp
Wire Wire Line
	3000 6400 3050 6400
Wire Wire Line
	3050 6400 3050 6350
Wire Wire Line
	2700 6400 2650 6400
Connection ~ 2650 6400
$Comp
L power:+5V #PWR0131
U 1 1 5FC15DD9
P 1500 4500
F 0 "#PWR0131" H 1500 4350 50  0001 C CNN
F 1 "+5V" V 1515 4628 50  0000 L CNN
F 2 "" H 1500 4500 50  0001 C CNN
F 3 "" H 1500 4500 50  0001 C CNN
	1    1500 4500
	0    -1   -1   0   
$EndComp
$Comp
L Diode:1N5819 D1
U 1 1 5FC17229
P 1750 5850
F 0 "D1" V 1796 5770 50  0000 R CNN
F 1 "1N5819" V 1705 5770 50  0000 R CNN
F 2 "Diode_SMD:D_SOD-123" H 1750 5675 50  0001 C CNN
F 3 "http://www.vishay.com/docs/88525/1n5817.pdf" H 1750 5850 50  0001 C CNN
F 4 "C8598" H 1750 5850 50  0001 C CNN "LCSC"
	1    1750 5850
	0    -1   -1   0   
$EndComp
Wire Wire Line
	1500 5600 1450 5600
Wire Wire Line
	1450 5600 1450 5700
Wire Wire Line
	1450 5700 1750 5700
Wire Wire Line
	2050 5600 2050 5700
Wire Wire Line
	2050 5700 1750 5700
Connection ~ 1750 5700
Wire Wire Line
	2000 5600 2050 5600
$Comp
L Isolator:EL817 U5
U 1 1 5FC4929C
P 7050 5300
F 0 "U5" H 7050 5625 50  0000 C CNN
F 1 "EL817" H 7050 5534 50  0000 C CNN
F 2 "Package_DIP:SMDIP-4_W7.62mm" H 6850 5100 50  0001 L CIN
F 3 "http://www.everlight.com/file/ProductFile/EL817.pdf" H 7050 5300 50  0001 L CNN
F 4 "C106900" H 7050 5300 50  0001 C CNN "LCSC"
	1    7050 5300
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR0132
U 1 1 5FC4B3DA
P 7400 5450
F 0 "#PWR0132" H 7400 5200 50  0001 C CNN
F 1 "GND" H 7405 5277 50  0000 C CNN
F 2 "" H 7400 5450 50  0001 C CNN
F 3 "" H 7400 5450 50  0001 C CNN
	1    7400 5450
	-1   0    0    -1  
$EndComp
Wire Wire Line
	7400 5450 7400 5400
Wire Wire Line
	7400 5400 7350 5400
$Comp
L power:GND #PWR0133
U 1 1 5FC4D573
P 6700 5450
F 0 "#PWR0133" H 6700 5200 50  0001 C CNN
F 1 "GND" H 6705 5277 50  0000 C CNN
F 2 "" H 6700 5450 50  0001 C CNN
F 3 "" H 6700 5450 50  0001 C CNN
	1    6700 5450
	-1   0    0    -1  
$EndComp
Wire Wire Line
	6700 5450 6700 5400
Wire Wire Line
	6700 5400 6750 5400
Text GLabel 7350 5200 2    50   Input ~ 10
~ERROR
$Comp
L Device:R_Small R9
U 1 1 5FC5225E
P 6650 5200
F 0 "R9" V 6454 5200 50  0000 C CNN
F 1 "120" V 6545 5200 50  0000 C CNN
F 2 "Resistor_SMD:R_0805_2012Metric" H 6650 5200 50  0001 C CNN
F 3 "~" H 6650 5200 50  0001 C CNN
F 4 "C17437" H 6650 5200 50  0001 C CNN "LCSC"
	1    6650 5200
	0    1    1    0   
$EndComp
Text GLabel 6550 5200 0    50   Input ~ 10
ERR_OUT
Text GLabel 7000 1950 2    50   Input ~ 0
FLASH_MOSI
Text GLabel 7000 1850 2    50   Input ~ 0
FLASH_MISO
Text GLabel 7000 1750 2    50   Input ~ 0
FLASH_CLK
Text GLabel 7000 1650 2    39   Input ~ 0
~FLASH_CS
Text GLabel 7000 3550 2    50   Input ~ 0
MULTI0
Text GLabel 7000 3650 2    50   Input ~ 0
MULTI1
$Comp
L Connector_Generic:Conn_01x04 J5
U 1 1 5FB67D26
P 2750 5400
F 0 "J5" H 2668 4975 50  0000 C CNN
F 1 "MULTI" H 2668 5066 50  0000 C CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_1x04_P2.54mm_Vertical" H 2750 5400 50  0001 C CNN
F 3 "~" H 2750 5400 50  0001 C CNN
	1    2750 5400
	-1   0    0    1   
$EndComp
$Comp
L power:+3.3V #PWR0134
U 1 1 5FB68F97
P 3000 5200
F 0 "#PWR0134" H 3000 5050 50  0001 C CNN
F 1 "+3.3V" V 3015 5328 50  0000 L CNN
F 2 "" H 3000 5200 50  0001 C CNN
F 3 "" H 3000 5200 50  0001 C CNN
	1    3000 5200
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR0135
U 1 1 5FB6956E
P 2950 5500
F 0 "#PWR0135" H 2950 5250 50  0001 C CNN
F 1 "GND" V 2955 5372 50  0000 R CNN
F 2 "" H 2950 5500 50  0001 C CNN
F 3 "" H 2950 5500 50  0001 C CNN
	1    2950 5500
	1    0    0    -1  
$EndComp
Text GLabel 2950 5300 2    50   Input ~ 0
MULTI0
Text GLabel 2950 5400 2    50   Input ~ 0
MULTI1
Wire Wire Line
	3000 5200 2950 5200
$Comp
L Device:R_Small R5
U 1 1 5FB7DF97
P 3050 1250
F 0 "R5" V 2854 1250 50  0000 C CNN
F 1 "1k5" V 2945 1250 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric" H 3050 1250 50  0001 C CNN
F 3 "~" H 3050 1250 50  0001 C CNN
F 4 "C22843" H 3050 1250 50  0001 C CNN "LCSC"
	1    3050 1250
	-1   0    0    1   
$EndComp
$Comp
L Device:LED_Small D3
U 1 1 5FB807A7
P 3050 1450
F 0 "D3" V 3096 1380 50  0000 R CNN
F 1 "PWR" V 3005 1380 50  0000 R CNN
F 2 "LED_SMD:LED_0603_1608Metric_Castellated" V 3050 1450 50  0001 C CNN
F 3 "~" V 3050 1450 50  0001 C CNN
F 4 "C72043" H 3050 1450 50  0001 C CNN "LCSC"
	1    3050 1450
	0    -1   -1   0   
$EndComp
$Comp
L power:+3V3 #PWR0136
U 1 1 5FB81BAB
P 3050 1150
F 0 "#PWR0136" H 3050 1000 50  0001 C CNN
F 1 "+3V3" H 3065 1323 50  0000 C CNN
F 2 "" H 3050 1150 50  0001 C CNN
F 3 "" H 3050 1150 50  0001 C CNN
	1    3050 1150
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR0137
U 1 1 5FB82B40
P 3050 1650
F 0 "#PWR0137" H 3050 1400 50  0001 C CNN
F 1 "GND" H 3055 1477 50  0000 C CNN
F 2 "" H 3050 1650 50  0001 C CNN
F 3 "" H 3050 1650 50  0001 C CNN
	1    3050 1650
	1    0    0    -1  
$EndComp
Wire Wire Line
	3050 1550 3050 1600
$Comp
L Device:R_Small R6
U 1 1 5FB892B6
P 3400 1250
F 0 "R6" V 3204 1250 50  0000 C CNN
F 1 "1k5" V 3295 1250 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric" H 3400 1250 50  0001 C CNN
F 3 "~" H 3400 1250 50  0001 C CNN
F 4 "C22843" H 3400 1250 50  0001 C CNN "LCSC"
	1    3400 1250
	-1   0    0    1   
$EndComp
$Comp
L Device:LED_Small D4
U 1 1 5FB892C0
P 3400 1450
F 0 "D4" V 3446 1380 50  0000 R CNN
F 1 "STATUS" V 3355 1380 50  0000 R CNN
F 2 "LED_SMD:LED_0603_1608Metric_Castellated" V 3400 1450 50  0001 C CNN
F 3 "~" V 3400 1450 50  0001 C CNN
F 4 "C72038" H 3400 1450 50  0001 C CNN "LCSC"
	1    3400 1450
	0    -1   -1   0   
$EndComp
Wire Wire Line
	3400 1550 3400 1600
Wire Wire Line
	3400 1600 3050 1600
Connection ~ 3050 1600
Wire Wire Line
	3050 1600 3050 1650
Text GLabel 3400 1150 1    50   Input ~ 0
STATUS
$Comp
L Device:R_Small R8
U 1 1 5FB8EF45
P 3800 1250
F 0 "R8" V 3604 1250 50  0000 C CNN
F 1 "1k5" V 3695 1250 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric" H 3800 1250 50  0001 C CNN
F 3 "~" H 3800 1250 50  0001 C CNN
F 4 "C22843" H 3800 1250 50  0001 C CNN "LCSC"
	1    3800 1250
	-1   0    0    1   
$EndComp
$Comp
L Device:LED_Small D5
U 1 1 5FB8F365
P 3800 1450
F 0 "D5" V 3846 1380 50  0000 R CNN
F 1 "FAULT" V 3755 1380 50  0000 R CNN
F 2 "LED_SMD:LED_0603_1608Metric_Castellated" V 3800 1450 50  0001 C CNN
F 3 "~" V 3800 1450 50  0001 C CNN
F 4 "C2286" H 3800 1450 50  0001 C CNN "LCSC"
	1    3800 1450
	0    -1   -1   0   
$EndComp
Wire Wire Line
	3800 1550 3800 1600
Wire Wire Line
	3800 1600 3400 1600
Connection ~ 3400 1600
Text GLabel 3800 1150 1    50   Input ~ 0
ERR_OUT
$Comp
L Device:R_Small R10
U 1 1 5FB99C15
P 4200 1250
F 0 "R10" V 4004 1250 50  0000 C CNN
F 1 "1k5" V 4095 1250 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric" H 4200 1250 50  0001 C CNN
F 3 "~" H 4200 1250 50  0001 C CNN
F 4 "C22843" H 4200 1250 50  0001 C CNN "LCSC"
	1    4200 1250
	-1   0    0    1   
$EndComp
$Comp
L Device:LED_Small D6
U 1 1 5FB99F78
P 4200 1450
F 0 "D6" V 4246 1380 50  0000 R CNN
F 1 "DEBUG" V 4155 1380 50  0000 R CNN
F 2 "LED_SMD:LED_0603_1608Metric_Castellated" V 4200 1450 50  0001 C CNN
F 3 "~" V 4200 1450 50  0001 C CNN
F 4 "C72038" H 4200 1450 50  0001 C CNN "LCSC"
	1    4200 1450
	0    -1   -1   0   
$EndComp
Text GLabel 4200 1150 1    50   Input ~ 0
DEBUG_LED
Wire Wire Line
	4200 1550 4200 1600
Wire Wire Line
	4200 1600 3800 1600
Connection ~ 3800 1600
Text GLabel 5600 3950 0    50   Input ~ 0
STATUS
Text GLabel 5600 4050 0    50   Input ~ 0
ERR_OUT
Text GLabel 5600 4150 0    50   Input ~ 0
DEBUG_LED
Text GLabel 5600 2950 0    50   Input ~ 0
HALL3
Text GLabel 5600 3050 0    50   Input ~ 0
HALL2
Text GLabel 5600 3150 0    50   Input ~ 0
HALL1
$Comp
L Device:C_Small C1
U 1 1 5FBD3209
P 1650 6850
F 0 "C1" H 1700 6950 50  0000 L CNN
F 1 "100nF" H 1700 6800 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 1650 6850 50  0001 C CNN
F 3 "~" H 1650 6850 50  0001 C CNN
F 4 "C14663" H 1650 6850 50  0001 C CNN "LCSC"
	1    1650 6850
	1    0    0    -1  
$EndComp
Wire Wire Line
	1650 6750 1650 6600
Wire Wire Line
	1200 6600 1650 6600
Wire Wire Line
	1800 6600 1650 6600
Connection ~ 1650 6600
Wire Wire Line
	1650 6950 1650 7200
Wire Wire Line
	1650 7200 900  7200
Connection ~ 900  7200
Text GLabel 5300 1450 0    50   Input ~ 0
~BOOT
Text GLabel 3250 2100 0    50   Input ~ 0
~BOOT
$Comp
L Switch:SW_SPST SW1
U 1 1 5FBE467D
P 3450 2100
F 0 "SW1" H 3450 2335 50  0000 C CNN
F 1 "BOOT" H 3450 2244 50  0000 C CNN
F 2 "Button_Switch_SMD:SW_SPST_PTS645" H 3450 2100 50  0001 C CNN
F 3 "~" H 3450 2100 50  0001 C CNN
	1    3450 2100
	1    0    0    -1  
$EndComp
Text GLabel 3250 2450 0    50   Input ~ 0
BUTTON
$Comp
L Switch:SW_SPST SW2
U 1 1 5FBE78D0
P 3450 2450
F 0 "SW2" H 3450 2685 50  0000 C CNN
F 1 "BUTTON" H 3450 2594 50  0000 C CNN
F 2 "Button_Switch_SMD:SW_SPST_PTS645" H 3450 2450 50  0001 C CNN
F 3 "~" H 3450 2450 50  0001 C CNN
	1    3450 2450
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR0138
U 1 1 5FBEAA8A
P 3750 2450
F 0 "#PWR0138" H 3750 2200 50  0001 C CNN
F 1 "GND" H 3755 2277 50  0000 C CNN
F 2 "" H 3750 2450 50  0001 C CNN
F 3 "" H 3750 2450 50  0001 C CNN
	1    3750 2450
	1    0    0    -1  
$EndComp
Wire Wire Line
	3750 2450 3700 2450
Wire Wire Line
	3700 2450 3700 2100
Wire Wire Line
	3700 2100 3650 2100
Connection ~ 3700 2450
Wire Wire Line
	3700 2450 3650 2450
Text GLabel 7000 2950 2    50   Input ~ 0
CURR_U
Text GLabel 7000 1550 2    50   Input ~ 0
CURR_W
Text GLabel 7000 1350 2    50   Input ~ 0
CURR_V
Text Notes 7350 1400 0    50   ~ 0
OPAMP1
Text Notes 7700 3000 2    50   ~ 0
OPAMP2\n
Text GLabel 7000 3150 2    50   Input ~ 0
VBUS_SCALED
Text GLabel 7000 3050 2    50   Input ~ 0
ENABLE
Text GLabel 7000 1250 2    50   Input ~ 0
BUTTON
NoConn ~ 1200 7000
NoConn ~ 5250 7050
NoConn ~ 5250 7150
NoConn ~ 4350 5350
Wire Wire Line
	5100 2300 5150 2300
Wire Wire Line
	5100 2500 5150 2500
$Comp
L Device:Crystal_GND24_Small Y1
U 1 1 5FC6A0F6
P 5150 2400
F 0 "Y1" H 5300 2500 50  0000 L CNN
F 1 "12MHz" H 5300 2300 50  0000 L CNN
F 2 "Crystal:Crystal_SMD_3225-4Pin_3.2x2.5mm" H 5150 2400 50  0001 C CNN
F 3 "~" H 5150 2400 50  0001 C CNN
F 4 "C9002" H 5150 2400 50  0001 C CNN "LCSC"
	1    5150 2400
	1    0    0    -1  
$EndComp
Connection ~ 5150 2500
Wire Wire Line
	5150 2500 5250 2500
Connection ~ 5150 2300
Wire Wire Line
	5150 2300 5250 2300
Wire Wire Line
	5050 2400 4850 2400
Wire Wire Line
	5250 2400 5300 2400
Wire Wire Line
	5300 2400 5300 2200
Wire Wire Line
	4850 2200 4850 2300
Connection ~ 4850 2300
Text GLabel 3150 7000 2    50   Input ~ 0
USB_D+
Text GLabel 3150 6800 2    50   Input ~ 0
USB_D-
$Comp
L Connector_Generic:Conn_02x13_Odd_Even J3
U 1 1 5FB5DC31
P 1700 4100
F 0 "J3" H 1750 4917 50  0000 C CNN
F 1 "TO_POWER_BOARD" H 1750 4826 50  0000 C CNN
F 2 "Connector_IDC:IDC-Header_2x13_P2.54mm_Vertical" H 1700 4100 50  0001 C CNN
F 3 "~" H 1700 4100 50  0001 C CNN
	1    1700 4100
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR01
U 1 1 5FD220C9
P 5100 3550
F 0 "#PWR01" H 5100 3300 50  0001 C CNN
F 1 "GND" H 5105 3377 50  0000 C CNN
F 2 "" H 5100 3550 50  0001 C CNN
F 3 "" H 5100 3550 50  0001 C CNN
	1    5100 3550
	1    0    0    -1  
$EndComp
$Comp
L Connector:Conn_01x04_Male J6
U 1 1 5FD31C82
P 4900 3350
F 0 "J6" H 5008 3631 50  0000 C CNN
F 1 "TEMP" H 5008 3540 50  0000 C CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_2x02_P2.54mm_Vertical" H 4900 3350 50  0001 C CNN
F 3 "~" H 4900 3350 50  0001 C CNN
	1    4900 3350
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR02
U 1 1 5FD36362
P 5100 3450
F 0 "#PWR02" H 5100 3300 50  0001 C CNN
F 1 "+3.3V" V 5115 3578 50  0000 L CNN
F 2 "" H 5100 3450 50  0001 C CNN
F 3 "" H 5100 3450 50  0001 C CNN
	1    5100 3450
	0    1    1    0   
$EndComp
Text GLabel 1500 3800 0    50   Input ~ 0
NTC_PWR
Text GLabel 7000 1450 2    50   Input ~ 0
NTC_PWR
Wire Wire Line
	7400 2750 7000 2750
$Comp
L MCU_ST_STM32F3:STM32F303RCTx U?
U 1 1 5FD72D10
P 6300 2850
F 0 "U?" H 6600 1000 50  0000 C CNN
F 1 "STM32F303RCTx" H 6850 1100 50  0000 C CNN
F 2 "Package_QFP:LQFP-64_10x10mm_P0.5mm" H 5700 1150 50  0001 R CNN
F 3 "http://www.st.com/st-web-ui/static/active/en/resource/technical/document/datasheet/DM00058181.pdf" H 6300 2850 50  0001 C CNN
	1    6300 2850
	1    0    0    -1  
$EndComp
Wire Wire Line
	6200 950  6100 950 
Wire Wire Line
	6100 950  6100 1050
Connection ~ 6200 950 
Wire Wire Line
	5300 2200 4850 2200
Wire Wire Line
	5600 3250 5100 3250
Wire Wire Line
	5600 3350 5100 3350
$EndSCHEMATC
